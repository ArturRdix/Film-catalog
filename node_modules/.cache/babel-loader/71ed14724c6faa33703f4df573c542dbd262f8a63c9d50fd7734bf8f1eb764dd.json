{"ast":null,"code":"var _jsxFileName = \"D:\\\\html\\\\Film-catalog\\\\src\\\\Components\\\\ContainerFilms.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport FilmPrev from './FilmPrev';\nimport './ContainerFilms.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ContainerFilms = _ref => {\n  _s();\n  let {\n    sortValue\n  } = _ref;\n  const [films, setFilms] = useState({\n    films: []\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const filmsPerPage = 30;\n  const [totalPages, setTotalPages] = useState(0);\n  const [searchValue, setSearchValue] = useState('');\n  useEffect(() => {\n    sortFilms(sortValue);\n  }, [sortValue]);\n  const sortFilms = sortValue => {\n    const sortedFilms = [...films.films];\n    if (sortValue === 'title') {\n      sortedFilms.sort((a, b) => {\n        const titleA = a.title.toUpperCase();\n        const titleB = b.title.toUpperCase();\n        if (titleA < titleB) {\n          return -1;\n        }\n        if (titleA > titleB) {\n          return 1;\n        }\n        return 0;\n      });\n    } else if (sortValue === 'year') {\n      sortedFilms.sort((a, b) => b.year - a.year);\n    } else if (sortValue === 'rate') {\n      sortedFilms.sort((a, b) => b.rating - a.rating);\n    }\n    setFilms({\n      films: sortedFilms\n    });\n  };\n  const getMovies = async () => {\n    const {\n      data: {\n        data: {\n          movies,\n          movie_count\n        }\n      }\n    } = await axios.get('https://yts.mx/api/v2/list_movies.json', {\n      params: {\n        page: currentPage,\n        limit: filmsPerPage,\n        query_term: searchValue // Добавляем параметр поиска\n      }\n    });\n\n    setFilms({\n      films: movies\n    });\n    const totalPages = Math.ceil(movie_count / filmsPerPage);\n    setTotalPages(totalPages);\n  };\n  const goToPreviousPage = () => {\n    setCurrentPage(prevPage => prevPage - 1);\n  };\n  const goToNextPage = () => {\n    setCurrentPage(prevPage => prevPage + 1);\n  };\n  useEffect(() => {\n    getMovies();\n  }, [currentPage]); // Запускаем запрос на сервер при изменении currentPage\n\n  const handleSearch = () => {\n    setCurrentPage(1); // Сброс текущей страницы при поиске\n    getMovies();\n  };\n  const handleSearchInputChange = event => {\n    setSearchValue(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"search-input\",\n        type: \"text\",\n        placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0444\\u0438\\u043B\\u044C\\u043C\\u0430\",\n        value: searchValue,\n        onChange: handleSearchInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-btn\",\n        onClick: handleSearch,\n        children: \"\\u041F\\u043E\\u0438\\u0441\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n};\n_s(ContainerFilms, \"XcSZuZwAc0zlT0rpcB2NQUmxePo=\");\n_c = ContainerFilms;\nexport default ContainerFilms;\nvar _c;\n$RefreshReg$(_c, \"ContainerFilms\");","map":{"version":3,"names":["React","useState","useEffect","axios","FilmPrev","jsxDEV","_jsxDEV","ContainerFilms","_ref","_s","sortValue","films","setFilms","currentPage","setCurrentPage","filmsPerPage","totalPages","setTotalPages","searchValue","setSearchValue","sortFilms","sortedFilms","sort","a","b","titleA","title","toUpperCase","titleB","year","rating","getMovies","data","movies","movie_count","get","params","page","limit","query_term","Math","ceil","goToPreviousPage","prevPage","goToNextPage","handleSearch","handleSearchInputChange","event","target","value","className","children","type","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/html/Film-catalog/src/Components/ContainerFilms.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport FilmPrev from './FilmPrev';\r\nimport './ContainerFilms.css';\r\n\r\nconst ContainerFilms = ({ sortValue }) => {\r\n    const [films, setFilms] = useState({ films: [] });\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const filmsPerPage = 30;\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [searchValue, setSearchValue] = useState('');\r\n\r\n    useEffect(() => { sortFilms(sortValue); }, [sortValue]);\r\n    \r\n    const sortFilms = (sortValue) => {\r\n        const sortedFilms = [...films.films]; \r\n        if (sortValue === 'title') {\r\n          sortedFilms.sort((a, b) => {\r\n            const titleA = a.title.toUpperCase();\r\n            const titleB = b.title.toUpperCase();\r\n      \r\n            if (titleA < titleB) {\r\n              return -1;\r\n            }\r\n            if (titleA > titleB) {\r\n              return 1;\r\n            }\r\n            return 0;\r\n          });\r\n        } else if (sortValue === 'year') {\r\n          sortedFilms.sort((a, b) => b.year - a.year);\r\n        }\r\n        else if (sortValue === 'rate') {\r\n            sortedFilms.sort((a, b) => b.rating - a.rating); \r\n          }\r\n      \r\n        setFilms({ films: sortedFilms });\r\n      };\r\n      \r\n      \r\n      \r\n    const getMovies = async () => {\r\n        const {\r\n          data: {\r\n            data: { movies, movie_count },\r\n          },\r\n        } = await axios.get('https://yts.mx/api/v2/list_movies.json', {\r\n          params: {\r\n            page: currentPage,\r\n            limit: filmsPerPage,\r\n            query_term: searchValue, // Добавляем параметр поиска\r\n          },\r\n        });\r\n        setFilms({ films: movies });\r\n        const totalPages = Math.ceil(movie_count / filmsPerPage);\r\n        setTotalPages(totalPages);\r\n      };\r\n      \r\n\r\n    const goToPreviousPage = () => {\r\n        setCurrentPage((prevPage) => prevPage - 1);\r\n    };\r\n\r\n    const goToNextPage = () => {\r\n        setCurrentPage((prevPage) => prevPage + 1);\r\n    };\r\n\r\n    useEffect(() => { getMovies(); }, [currentPage]); // Запускаем запрос на сервер при изменении currentPage\r\n\r\n    const handleSearch = () => {\r\n        setCurrentPage(1); // Сброс текущей страницы при поиске\r\n        getMovies();\r\n      };\r\n      \r\n      const handleSearchInputChange = (event) => {\r\n        setSearchValue(event.target.value);\r\n      };\r\n      \r\n      return (\r\n        <div className=\"wrapper\">\r\n          <div className=\"search-bar\">\r\n            <input\r\n              className=\"search-input\"\r\n              type=\"text\"\r\n              placeholder=\"Название фильма\"\r\n              value={searchValue}\r\n              onChange={handleSearchInputChange}\r\n            />\r\n            <button className=\"search-btn\" onClick={handleSearch}>\r\n              Поиск\r\n            </button>\r\n          </div>\r\n          {/* Остальной код компонента */}\r\n        </div>\r\n      );\r\n};\r\n\r\nexport default ContainerFilms;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}